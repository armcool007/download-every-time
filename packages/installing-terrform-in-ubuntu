#!/bin/bash

echo "ğŸš€ Terraform installation shuru ho raha hai..."

# System update
sudo apt update && sudo apt upgrade -y

# Zaroori tools install karo
sudo apt install -y wget unzip jq

# Latest Terraform version fetch karo
LATEST_VERSION=$(curl -s https://checkpoint-api.hashicorp.com/v1/check/terraform | jq -r '.current_version')
echo "ğŸ“¥ Latest Terraform version: $LATEST_VERSION"

# Download karo
wget https://releases.hashicorp.com/terraform/${LATEST_VERSION}/terraform_${LATEST_VERSION}_linux_amd64.zip

# Extract karo
unzip terraform_${LATEST_VERSION}_linux_amd64.zip

# Install karo
sudo mv terraform /usr/local/bin/

# Verify karo
if command -v terraform &> /dev/null; then
    echo "âœ… Terraform successfully installed!"
    terraform -version
else
    echo "âŒ Installation failed!"
    exit 1
fi

# Optional: Tab completion enable karo
terraform -install-autocomplete
